<%@ page language="java" contentType="text/html; charset=UTF-8"	pageEncoding="UTF-8"%><%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%><%@ taglib uri="http://www.springframework.org/security/tags" prefix="security" %><%@ taglib uri="http://java.sun.com/jsp/jstl/functions" prefix="fn"%><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml"	  xmlns:h="http://java.sun.com/jsf/html"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>${companyName} - ${testplansDisplayName}</title>		<!-- Needed -->				<link rel="stylesheet" href="css/final/menubar.css" type="text/css" media="screen" />		<link rel="stylesheet" href="css/final/layout-default-latest.css" type="text/css" />			<link rel="stylesheet" href="css/final/ui.multiselect.css" type="text/css" />		<link rel="stylesheet" href="css/final/jquery-ui-1.9.1.custom.css" type="text/css" />		<link rel="stylesheet" href="css/final/ui.jqgrid.css" type="text/css" />				<!--			<link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.7.2/themes/start/jquery-ui.css" type="text/css" rel="Stylesheet" class="ui-theme">			<link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.7.2/themes/redmond/jquery-ui.css" type="text/css" rel="Stylesheet" class="ui-theme">		 -->	<!-- Needed -->		<!-- Not needed 	<link rel="stylesheet" type="text/css" href="http://layout.jquery-dev.net/lib/css/themes/base/jquery.ui.all.css">	Not needed -->			<!-- <script type="text/javascript" src="resources/js/jquery-1.8.2.js"></script>   -->	<script type="text/javascript" src="http://code.jquery.com/jquery-1.8.3.min.js"></script>		 <script type="text/javascript" src="http://code.jquery.com/jquery-1.7.1.min.js"></script>  	<script type="text/javascript" src="http://ajax.aspnetcdn.com/ajax/jquery.ui/1.8.20/jquery-ui.min.js"></script>		<script type="text/javascript" src="http://layout.jquery-dev.net/lib/js/jquery.layout-latest.js"></script>	<script type="text/javascript" src="http://layout.jquery-dev.net/lib/js/jquery.layout.resizePaneAccordions-1.0.js"></script>		<script type="text/javascript" src="http://www.ok-soft-gmbh.com/jqGrid/jquery.jqGrid-4.3.3/plugin/ui.multiselect.js"></script>	<script type="text/javascript" src="http://www.ok-soft-gmbh.com/jqGrid/jquery.jqGrid-4.3.3/js/i18n/grid.locale-en.js"></script>       <script type="text/javascript" src="http://www.ok-soft-gmbh.com/jqGrid/jquery.jqGrid-4.3.3/js/jquery.jqGrid.src.js"></script>        <script type="text/javascript">        $.jgrid.no_legacy_api = true;        $.jgrid.useJSON = true;		    </script>    <script type="text/javascript" src="http://www.ok-soft-gmbh.com/jqGrid/jquery.jqGrid-4.3.3/js/jquery.jqGrid.min.js"></script>    	<style type="text/css">	.grid .ui-jqgrid-htable th,	.grid .ui-jqgrid-btable .jqgrow td {	    height: 10em !important;	}	.ui-priority-secondary{background: #E8E8E8;}	.innerAccordian .ui-accordion-header  a	{	display: block;	font-size: 1em;	padding: .2em .5em .5em 2.2em;	}	#fieldS{		margin-left:10%;		color:#606060;		}		.ui-helper-reset {		line-height: 1.3;		font-size: 10px;		list-style: none;		color:blue;	}	.ui-widget 	{		font-family: Verdana,Arial,sans-serif;		font-size: 0.8em;	}	/* customize borders to avoid double-borders around inner-layouts */	.ui-layout-pane {		border:			0; /* override layout-default-latest.css */		border-top:		0px solid #BBB;		border-bottom:	0px solid #BBB;	}	.ui-layout-pane-north , .ui-layout-pane-south	{			border:			0px solid #BBB;		overflow:		hidden;		z-index: 3 !important;		overflow: visible !important; 	}	.ui-layout-pane-east 	{	}	.ui-layout-pane-center		{		border-left:	0;		border-right:	0;	}		.inner-center 		{			border:		0;			border-right:	0; 						padding:		0;			background:		#E8E8E8;		}		.inner-south 		{			border-top:		0px;			border-right:		0; 			border-bottom:		0; 		}		.outer-east, .outer-east .ui-layout-content { 		padding: 0;		overflow: hidden;		background-color: #EEE;	}		/* remove padding & scrolling from panes that are 'containers' for nested layouts */	.outer-center {		border:			0; /* cosmetic */		padding:		0;	}	.middle-center {		border:			0; /* cosmetic */		padding:		0;		/*overflow:		hidden;*/	}	button {		padding-left:9px;		padding-right:9px;		padding-top:2px;		padding-bottom:2px;	}	/*	 *	customize borders on panes/resizers to make pretty	 */		.ui-layout-pane-east			{ 		border-left:		0; 	}	.ui-layout-resizer-east			{		border-left:		0; 		border-right:		0; 	}		.ui-layout-pane-north			{ 		border-bottom:	0; 	}	.ui-layout-resizer-north		{ 		border-top:		1px solid #BBB; 	}		.ui-layout-pane-south			{ 		border-top:		0; 		background:		#FFF;	}	.ui-layout-resizer-south		{ 		border-top:		1px solid #BBB; 		border-bottom: 	0; 	}		/*	 *	add borders to resizers when pane is 'closed'	 *	 *.ui-layout-resizer-closed	{ border:			1px solid #BBB; }	 */	/*	 *	show both borders when the resizer is 'dragging'	 */		.ui-layout-resizer-east-dragging 	{		border-left:		1px solid #BBB;		border-right:		1px solid #BBB;	}	.ui-layout-resizer-north-dragging ,.ui-layout-resizer-south-dragging 	{		border-top:		1px solid #BBB;		border-bottom:	1px solid #BBB;	}	h3, h4 	{ 		/* Headers & Footer in Center & East panes */		font-size:		1.1em;		background:		#EEF;		border:			1px solid #BBB;		border-width:	0 0 1px;		padding:		7px 10px;		margin:			0;	}	.progressBarDiv		{ 						-moz-box-shadow: 0px 0px 4px #333; 			-webkit-box-shadow: 0px 0px 4px #333;             box-shadow: 1px 1px 3px #333; 		}		.progressBarDiv:hover {			//zoom: 200%;					//.redBar.background-color:#333;		}		.blueBar		{ 						background-color:#4573a7;					//background-image: url(images/redProgressBar.jpg); height:auto;		}				.redBar		{ 				background-color:#AE3B37; 						//background-color:#C2423D; 						//background-image: url(images/redProgressBar.jpg); height:auto		}		.redBar:hover {						//background-color:#A64E5E; 		}				.orangeBar 		{								background-color:#DDC23F; 				//background-color:#E9AF32; 			}		.greenBar 		{								background-color:#6eaf37; 							//background-color:#89a54e; 			//background-image: url(images/green_bg3.png);		}		.greenBar:hover {			//-moz-transform: scale(2);			//background-color:#89a54e; 		}		.pgPercent{			width:20%;			float: left;			color: #4573a7;			font-weight:bold;			display:inline-block;'		}</style>	<script type="text/javascript">$(function() {	$(document).ready(function () 	{				// OUTER-LAYOUT		$('body').layout(		{			center__paneSelector:	".outer-center"	,				east__paneSelector:		".outer-east",					east__size:				250,			//onresize: resizeGrid,			spacing_open:			8 , // ALL panes			spacing_closed:			12, // ALL panes			north__minSize:			90,					south__maxSize:			60,			south__resizable:	false,						south__closable:	false,				north__resizable:	false,						north__closable:	false,				// MIDDLE-LAYOUT (child of outer-center-pane)			center__childOptions: 			{								center__paneSelector:	".middle-center",						// INNER-LAYOUT (child of middle-center-pane)				center__childOptions: 				{					center__paneSelector:	".inner-center",					south__paneSelector:	".inner-south",							south__minSize:			20,					south__resizable:	false,								south__closable:	false,									}			}		});	 	var grid = jQuery('#report'); 		var subGrid = jQuery("#sub"); 	 				$('.ui-jqgrid-titlebar-close', '#report').remove();				$("#accordion2").accordion({fillSpace:true, active:0});				$("#accordion").accordion(		{			autoHeight:true,			icons:{ "header": "ui-icon-triangle-1-e", "headerSelected": "ui-icon-triangle-1-s"}		});				$("#addTestplan" ).button().click(function()		{		 	$("#dialog-add").dialog("open");		});		$("#createTestplan").button().click(function()		{			$("#dialog-form").dialog("open");		});				$("#viewDetails" ).button().click(function() 		{			var id = grid.jqGrid('getGridParam','selrow');			if (id) 			{					window.location =  '?userpath=${userpath}>'+ id;				//var proj= grid.jqGrid('getRowData',id);				//jQuery("#dialog-modal" ).dialog( "open" );				//alert("Project ID="+proj.projectID+" Project ID="+proj.projectName+"...");			} 			else 			{				//alert("Please select row");			}		});					$("#deleteTestplan").button().click(function()	 	{ 	 		// Get the currently selected row	 	    toDelete = jQuery('#report').jqGrid('getGridParam','selrow');		 		// You'll get a pop-up confirmation dialog, and if you say yes,	 		// it will call "delete.php" on your server.	 		jQuery('#report').jqGrid('delGridRow',toDelete, 	 		{ 	 			url: 'testplan/delete',	 			height:200,	 			reloadAfterSubmit:false,	 			modal:true,	 			afterSubmit:function(data,postd)	 			{	 				console.log(data);	 				console.log(postd);	 				return {0:true};	 			},	 			afterComplete:function(data,postd)	 			{	 				//window.location.reload();	 				return true;	 			},				 			msg: "Are you sure you want to Delete\n Testplan "+toDelete+" \n and all its associated Data?"	 		});   	 	}); 		$("#removeTestplan").button().click(function() 		{ 					    var id = grid.jqGrid('getGridParam','selrow');			if (id) 			{				$("#dialog-remove").dialog("open");								$("#removeTestplanID").val(id);					var testplanName = grid.getCell(id, 'testplanName');				//grid.jqGrid('getGridParam','getCell');				$(".removeTestplanName").text(testplanName);				//window.location = '/Clients/Details/'+ id;				//window.location =  '?userpath=${userpath}>'+ id;				//var proj= grid.jqGrid('getRowData',id);				//jQuery("#dialog-modal" ).dialog( "open" );				//alert("Project ID="+proj.projectID+" Project ID="+proj.projectName+"...");			} 			else 			{				//alert("Please select row");			}		});	 			    			///////// Functions For each Row 					var functionsMapping = 		{			// here we define the implementations of the custom formatter which we use			"setOverallBarChart" : function(cellValue, opts,rowObject) 			{				var barChartHtml = "";				var remainingPercent = 0;				var targetreached = false;				var currentPercent = rowObject.newFeatureCurrentPercent + rowObject.regressionCurrentPercent;								if(rowObject.regressionCurrentPercent >= rowObject.regressionRequiredPercent && 						rowObject.newFeatureCurrentPercent >= rowObject.newFeatureRequiredPercent )				{					targetreached = true;				}				currentPercent = (currentPercent/200) * 100;				remainingPercent = 100 - currentPercent;				//barChartHtml = "<div style='width:90%;display:inline-block;'  >";				barChartHtml = "<div style='width:90%;height:20px;display:inline-block;float: left;' class='progressBarDivSmall' >";								barChartHtml = barChartHtml + "<div style='width:75%;display:inline-block;float: left;' class='progressBarDiv' id='progressBarDiv'  >";				if (targetreached)				{					var barChartHtml = barChartHtml + "<div  class='greenBar' style='width:"+currentPercent+"%; float: left;display:inline-block;'> </div>";				} else				{					var barChartHtml = barChartHtml + "<div  class='orangeBar' style='width:"+currentPercent+"%;  float: left;display:inline-block;'> </div>";				}				barChartHtml = barChartHtml + "<div class='redBar' style='width:"+remainingPercent+"%;float: left; display:inline-block;'> </div>";				barChartHtml = barChartHtml + "</div>";				barChartHtml = barChartHtml + "<div style='width:10%;height:20px;display:inline-block;float: right;'>";		    	barChartHtml = barChartHtml + " "+Math.floor(rowObject.regressionRequiredPercent)+"%";			    	barChartHtml = barChartHtml + "</div>";								return barChartHtml;			},			"setRegressionBarChart" : function(cellValue, opts,rowObject)			{				var barChartHtml = "";				var remainingPercent = 0;								var currentPercent = rowObject.regressionCurrentPercent;				remainingPercent = 100 - currentPercent;				//barChartHtml = "<div style='width:90%;display:inline-block;'  >";				barChartHtml = "<div style='width:90%;height:20px;display:inline-block;float: left;' class='progressBarDivSmall' >";								barChartHtml = barChartHtml + "<div style='width:75%;display:inline-block;float: left;' class='progressBarDiv' id='progressBarDiv'  >";				if (currentPercent >= rowObject.regressionRequiredPercent) 				{					barChartHtml = barChartHtml + "<div  class='greenBar' style='width:"+currentPercent+"%; float: left;display:inline-block;'> </div>";				} else 				{					barChartHtml = barChartHtml + "<div  class='orangeBar' style='width:"+currentPercent+"%; float: left;display:inline-block;'> </div>";				}				barChartHtml = barChartHtml + "<div class='redBar' style='width:"+remainingPercent+"%;float: left; display:inline-block;'> </div>";				barChartHtml = barChartHtml + "</div>";				barChartHtml = barChartHtml + "<div style='width:10%;height:20px;display:inline-block;float: right;'>";		    	barChartHtml = barChartHtml + " "+Math.floor(rowObject.regressionCurrentPercent)+"%";			    	barChartHtml = barChartHtml + "</div>";				return barChartHtml;			},			"setNewFeatureBarChart" : function(cellValue, opts,rowObject) 			{				var barChartHtml = "";				var remainingPercent = 0;							var currentPercent = rowObject.newFeatureCurrentPercent;				remainingPercent = 100 - currentPercent;				//barChartHtml = "<div style='width:90%;display:inline-block;'  >";				barChartHtml = "<div style='width:90%;height:20px;display:inline-block;float: left;' class='progressBarDivSmall' >";				barChartHtml = barChartHtml + "<div style='width:75%;display:inline-block;float: left;' class='progressBarDiv' id='progressBarDiv'  >";				if (currentPercent >= rowObject.newFeatureRequiredPercent) 				{					barChartHtml = barChartHtml+ "<div  class='greenBar' style='width:"+currentPercent+"%; float: left;display:inline-block;'> </div>";				} else 				{					barChartHtml = barChartHtml + "<div  class='orangeBar' style='width:"+currentPercent+"%;  float: left;display:inline-block;'> </div>";				}				barChartHtml = barChartHtml + "<div class='redBar' style='width:"+remainingPercent+"%;float: left; display:inline-block;'> </div>";										barChartHtml = barChartHtml + "</div>";				barChartHtml = barChartHtml + "<div style='width:10%;height:20px;display:inline-block;float: right;'>";		    	barChartHtml = barChartHtml + " "+Math.floor(rowObject.newFeatureCurrentPercent)+"%";			    	barChartHtml = barChartHtml + "</div>";				return barChartHtml;			},			"unSetBarChart" : function(cellValue, opts,rowObject) 			{				return cellvalue;			},			"setProgressBarTitle" : function(rowId, val,rowObject, cm, rdata) 			{				return 'title=" Required : '						+ rowObject.regressionRequiredPercent						+ ' % -  Current : '						+ rowObject.regressionRequiredPercent						+ '%"';			},			"percentFmatter" : function percentFmatter(cellvalue, options, rowObject)			{				return cellvalue + " %";			},			"unformatPercent" : function(cellvalue, options)			{				return cellvalue.replace(" %", "");			},			"showImage" : function(item) 			{				var isAparentProject = true;				if (isAparentProject)				{					return "<img src='images/ok.png' />";				} 				else 				{					return "";				}			},			"InterFinalPriceFormatter" : function(cellValue, opts, rowObject)			{				return cellValue + "Testing price formatter";			}		};		//////// End of Function 		$.ajax(		{			type : "GET",			url : 'testplan/ColsAndNames/${companyID}',			dataType : "json",			success : function(result)			{				var columnNames = result.colName;				var columnModel = result.colModel;				for ( var i = 0; i < columnModel.length; i++) 				{					cm = columnModel[i];					if (cm.hasOwnProperty("formatter") && functionsMapping.hasOwnProperty(cm.formatter))					{						// fix colM[i].formatter from string to the function						cm.formatter = functionsMapping[cm.formatter];					}					if (cm.hasOwnProperty("unformat") && functionsMapping.hasOwnProperty(cm.unformat)) 					{						// fix colM[i].formatter from string to the function						cm.unformat = functionsMapping[cm.unformat];					}				}								grid.jqGrid(	        	{	        		url : '${gridUrl}',					datatype : 'json',					mtype : "GET",					colNames : columnNames,					colModel : columnModel,			            		            //data: mydata,		            //datatype: "local",              				 	//rowNum: -1,			          		            		     //       loadonce : true, // wont sort (work) with tree grid - turn table into local data hence no refresh					altClass: 'altRow',					altRows: true,										emptyrecords : 'No Test plans',					scroll : 1,					//rownumbers: true,					//rownumWidth: 40,					//autowidth: true,					//pager : '#pager',					gridview : true,					viewrecords : true, // Total number in pager										sortable : true,					sortname : 'testplanID',					sortorder : "DSC",					//height:'auto',						height : 600,					width : 1200,					jsonReader : 					{						root : "testplans",						id : "testplanID",						repeatitems : false,						page : function(obj) {return 1;},						total : function(obj) {return 1;},						records : function(obj) {return obj.testplans.length;}					},					// Single Click 					onSelectRow : function(ids) 					{						if (ids != null) 						{														var rowData = grid.getRowData(ids);							subGrid.setGridParam({url : "testplan/relatedObjects/"+ ids +"${relatedObjects}",page : 1}).trigger('reloadGrid');							//subGrid.setGridParam({ url: "company/${company.companyID}", page: 1 });													//subGrid.setCaption(rowData['projectName']).trigger('reloadGrid');						}					},					// Double Click					ondblClickRow : function(id, rowid) 					{						var proj = grid.getRowData(id);						// TODO :: Change URL to Details View 												window.location =  '?userpath=${userpath}>'+ id;					},   					loadComplete: function() 					{					       						var ids = grid.getDataIDs();					    for (var i = 0; i < ids.length; i++) 					    {					      grid.setRowData ( ids[i], false, {height: 20} );					    }					     					}        		});				grid.jqGrid('navGrid', '#pager', {del : false,add : false,edit : false,refresh : true}, {}, {}, {}, {					multipleSearch : true,					closeAfterSearch : true,					closeAfterReset : true,					Find : "Search",					drag : true,					Reset : "Reset",					caption : "Search testplan List"				});				grid.jqGrid('filterToolbar', 				{					stringResult : true,					searchOnEnter : true				});				// Select Columns				grid.jqGrid('navButtonAdd', '#pager', 				{					caption : "Columns",					//buttonicon: "ui-icon-calculator", 					title : "Choose Columns",					onClickButton : function() 					{						grid.jqGrid('columnChooser');					}				});				// 				jQuery("#viewDetails").click(function() // 				{// 					var id = grid.jqGrid('getGridParam','selrow');// 					if (id) // 					{// 						//window.location = '/Clients/Details/'+ id;// 						window.location =  '?userpath=${userpath}>'+ id;// 						//var proj= grid.jqGrid('getRowData',id);// 						//jQuery("#dialog-modal" ).dialog( "open" );// 						//alert("Project ID="+proj.projectID+" Project ID="+proj.projectName+"...");// 					} // 					else // 					{// 						//alert("Please select row");// 					}// 				});								jQuery("#searchTable").click( function()				{					grid.jqGrid('searchGrid', {multipleSearch:true, overlay: false});					//$("#search_report").trigger('click');							});				jQuery("#columnSelector").click( function()				{					grid.jqGrid('columnChooser');							});				jQuery("#refreshTable").click( function()				{					grid.trigger('reloadGrid');						subGrid.trigger('reloadGrid');					});								subGrid.jqGrid(				{					//caption : "Project:",					height : '100%',					width : 200,					datatype : "json",					colNames : ['Related object',	'Value' , 'RO_Name','RO_ID'],					colModel : [									{										name : 'relatedObjectName',										width : 20,										jsonmap:"relatedObjectName",										sortable : true									},									{										name : 'relatedObjectValue',										width : 10,										align : 'center',										sortable : true,										resizable : true,										search : true,										jsonmap:"relatedObjectValue",										sorttype : 'number'																			},									{										name : 'relatedObjectPathName',																			jsonmap:"relatedObjectPathName",										hidden : true									},									{										name : 'relatedObjectPathID',																				jsonmap:"relatedObjectPathID",										hidden : true									}								],					//rowNum: 5,					//rowList: [5, 10, 20],					//pager : jQuery('#subpager'),					//datatype: "local",              				 	//rowNum: -1,			          		            		           // loadonce : true,					sortname: 'relatedobjectID',					scroll : 1,					emptyrecords : '0',					autoload:false,					viewrecords : true,					sortorder: "ASC",					jsonReader : 					{						root : "relatedObjects",						id : "relatedobjectID",						repeatitems : false,						page : function(obj) {return 1;},						total : function(obj) {return 1;},						records : function(obj) {return obj.relatedObjects.length;}					},					ondblClickRow : function(rowId)					{					    						var projRow = subGrid.getRowData(rowId);						//alert("1 : "+projRow.relatedObjectPathName);																		window.location =  '?userpath=${userpath}>'+ projRow.relatedObjectPathID+'>'+projRow.relatedObjectPathName;					},				});			}    	});		});		///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////	///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////	// Varibles 		var testplanName = $("#testplanName"), projectID = $("#projectID"); 	var allFields = $([]).add(testplanName).add(projectID);	var tips = $(".validateTips");		// End of Varibles 			///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////	///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////	// Create Project Dialog Validation 	function updateTips(t) 	{		tips.text(t).addClass("ui-state-highlight");		/*setTimeout(function() {			tips.removeClass( "ui-state-highlight", 1500 );		}, 500 );*/	}		function checkRange(o, n, min, max)	{		var value = parseInt(o.val(), 10);		//alert(o.val()+ " : "+ min + " to " + max);		if (value >= min && value <= max) 		{			return true;		} 		else		{			o.addClass("ui-state-error");					updateTips(n + " must be between " + min + " and " + max + ".");			return false;		}	}		function checkLength(o, n, min, max) {		if (o.val().length > max || o.val().length < min) 		{			o.addClass("ui-state-error");			updateTips("Length of " + n + " must be between " + min + " and " + max + ".");			return false;		} 		else 		{			return true;		}	}		function checkRegexp(o, regexp, n)	{		if (!(regexp.test(o.val())))		{			o.addClass("ui-state-error");			updateTips(n);			return false;		} 		else		{			return true;		}	}		// End of Create Project Dialog Validation			///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////	///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////	// Create Project Dialog 		$("#dialog-form").dialog(	{		autoOpen : false,		height : 300,		width : 400,		modal : true,		buttons : 		{			"Create" : function() 			{				var bValid = true;				allFields.removeClass("ui-state-error");				bValid = bValid && checkLength(testplanName, "Test Plan Name", 3, 64);								if (bValid)				{					$.post("testplan/add", 					{						companyID : "${companyID}",						projectID : projectID.val(),						testplanName : testplanName.val(),											}, 					function(result)					{						if (result == 'ok') 						{							$("#dialog-form").dialog("close");							$("#report").trigger("reloadGrid");						} 						else						{							updateTips(result);						}					});				}			},			Cancel : function() 			{				$(this).dialog("close");			}		},		open: function()		{// 			 $("#dialog-form").keypress(function(e) // 			 {// 				if (e.keyCode == $.ui.keyCode.ENTER) // 				{// 					 $(this).parent().find("button:eq(0)").trigger("click");// 				}// 			 });		 },		close : function() 		{			allFields.removeClass("ui-state-error");		}	});		// End of Create Testcase Dialog 	///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////	var testplanID = $("#testplanID"); 	var allAddFields = $([]).add(testplanID);	var Addtips = $(".validateAddTips");	///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////	// Add Testplan to  Dialog 	function updateAddTips(t) 	{		Addtips.text(t).addClass("ui-state-highlight");			}		$("#dialog-add").dialog(	{		autoOpen : false,		height : 160,		width : 300,		modal : true,		buttons : 		{			"Add" : function() 			{				var bValid = true;				allAddFields.removeClass("ui-state-error");										if (bValid)				{					$.post("testplan/addto", 					{						companyID : "${companyID}",						testplanID : testplanID.val(),								relatedItem : "${relatedItem}",						relatedItemID : "${relatedItemID}",					}, 					function(result)					{						if (result == 'ok') 						{							$("#dialog-add").dialog("close");							$("#report").trigger("reloadGrid");						} 						else						{							updateAddTips(result);						}					});				}			},			Cancel : function() 			{				$(this).dialog("close");			}		},		open: function()		{// 			 $("#dialog-form").keypress(function(e) // 			 {// 				if (e.keyCode == $.ui.keyCode.ENTER) // 				{// 					 $(this).parent().find("button:eq(0)").trigger("click");// 				}// 			 });		 },		close : function() 		{			allAddFields.removeClass("ui-state-error");		}	});		// End of Create Testcase Dialog 			///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////	var removeTestplanID = $("#removeTestplanID"); 	var allRemoveFields = $([]).add(removeTestplanID);	var Removetips = $(".validateRemoveTips");	///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////	// Add Testplan to  Dialog 	function updateAddTips(t) 	{		Removetips.text(t).addClass("ui-state-highlight");			}		$("#dialog-remove").dialog(	{		autoOpen : false,		height : 200,		width : 350,		modal : true,		buttons : 		{			"Remove" : function() 			{				var bValid = true;				allRemoveFields.removeClass("ui-state-error");										if (bValid)				{					$.post("testplan/remove", 					{						companyID : "${companyID}",						testplanID : removeTestplanID.val(),								relatedItem : "${relatedItem}",						relatedItemID : "${relatedItemID}",					}, 					function(result)					{						if (result == 'ok') 						{							//$("#report").jqGrid('delGridRow',removeTestplanID.val());							$("#dialog-remove").dialog("close");							$("#report").trigger("reloadGrid");						} 						else						{							updateRemoveTips(result);						}					});				}			},			Cancel : function() 			{				$(this).dialog("close");			}		},		open: function()		{// 			 $("#dialog-form").keypress(function(e) // 			 {// 				if (e.keyCode == $.ui.keyCode.ENTER) // 				{// 					 $(this).parent().find("button:eq(0)").trigger("click");// 				}// 			 });		 },		close : function() 		{			allRemoveFields.removeClass("ui-state-error");		}	});		///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////	// Create Project Dialog Button		//  	$("#addTestplan").button().click(function()//  	{//  		$("#dialog-add").dialog("open");//  	});//  	$("#createTestplan").button().click(function()// {// 		$("#dialog-form").dialog("open");// 	});// 	$("#deleteTestplan").click(function()// 	{ // 		 // Get the currently selected row// 	    toDelete = jQuery('#report').jqGrid('getGridParam','selrow');	// 	    // You'll get a pop-up confirmation dialog, and if you say yes,// 	    // it will call "delete.php" on your server.// 	    jQuery('#report').jqGrid('delGridRow',toDelete, // 	    { // 	    	url: 'testplan/delete',// 	   		height:200,// 			reloadAfterSubmit:false,// 			afterSubmit:function(data,postd)// 			{// 				console.log(data);// 				console.log(postd);// 				return {0:true};// 			},// 			afterComplete:function(data,postd)// 			{// 				//window.location.reload();// 				return true;// 			},			// 			msg: "Are you sure you want to Delete\n Testplan "+toDelete+" \n and all its associated Data?"// 		});   // 	});	// End of Create Testcase Dialog Button		///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////});//]]></script></head><body><!--	 ******************************************************************************************************************	 ************************************              Center objects           *****************************************	 ******************************************************************************************************************--><div class="outer-center">		<div class="middle-center">		<div class="inner-center" >			<div style="font-size:10px; padding-bottom:4px;padding-top:0px;padding-left:6px" >							${breadCrumb}  							</div>			<!--<h3 class="ui-widget-header" style="height: 10px; font-size:12px; padding-top: 2px;">Projects</h3>-->			<div style="left:800px;padding-right:10px;background:#FFF;" align="right"> 									<img id="refreshTable" style="cursor:pointer" src="images/refresh.jpg" /> 					&nbsp;&nbsp;					<img id="searchTable" style="cursor:pointer" src="images/search.jpg" /> 					&nbsp;&nbsp;					<img id="columnSelector" style="cursor:pointer" src="images/column.jpg" /> 							</div>						<div class="ui-layout-content ui-widget-content">				<div id="grid_container">									<table id="report"></table>					<div id="pager"></div>									</div>			</div>			<!--				 ******************************************************************************************************************				 ************************************              Button objects           *****************************************				 ******************************************************************************************************************			-->			<div style="padding-left:5px; padding-top:5px; padding-bottom:5px;"> 			<c:if test="${not empty relatedObjects}"> 					<c:if test="${not empty newTestplans}"> 							<button id="addTestplan">Add</button>	<!-- relatedObjects : ?projectID=1	 -->				</c:if>				</c:if>			<c:if test="${not empty relatedObjects}"> 					<c:if test="${not empty existingTestplans}"> 							<button id="removeTestplan">Remove</button>	<!-- relatedObjects : ?projectID=1	 -->				</c:if>				</c:if>			<button id="createTestplan">Create</button>							<button id="viewDetails"> View Details </button>				<button id="deleteTestplan"> Delete </button>							</div>		</div>		</div></div><!--	 ******************************************************************************************************************	 ************************************              EAST objects           *****************************************	 ******************************************************************************************************************--><div class="outer-east">	<div class="ui-layout-content">		<div id="accordion2" class="basic" >		<h3 style="height: 30px; font-size:12px; padding-top: 4px;"><a href="#">Related Objects</a></h3>			<div style="background:#FFF;">									* Double Click object to view						<table id="sub"></table>				<div id="subpager"></div>			</div>			<h3 style="height: 30px; font-size:12px; padding-top: 4px;"><a href="#">Quick Tasks</a></h3>			<div>					<fieldset style="width:90%;">				  <legend>${company.testLibraryDisplayName}:</legend>					<div id="fieldS" >						<a href="#">Create ${company.testplanDisplayName} </a><br/>						<a href="#">Execute ${company.testplanDisplayName} </a><br/>						<a href="#">Edit ${company.testplanDisplayName}</a> <br/>						<a href="#">Delete ${company.testplanDisplayName} </a><br/><br/>												<a href="#">Create ${company.testcaseDisplayName} </a><br/>						<a href="#">Execute ${company.testcaseDisplayName} </a><br/>						<a href="#">Edit ${company.testcaseDisplayName}</a> <br/>						<a href="#">Delete ${company.testcaseDisplayName} </a><br/><br/>											<a href="#">Create ${company.testrunDisplayName} </a><br/>						<a href="#">Execute ${company.testrunDisplayName} </a><br/>						<a href="#">Edit ${company.testrunDisplayName}</a> <br/>						<a href="#">Delete ${company.testrunDisplayName} </a><br/>											</div>				</fieldset>				<fieldset style="width:90%;">				  <legend>${company.defectDisplayName}:</legend>					<div id="fieldS" >						<a href="#">Create ${company.defectDisplayName} </a><br/>						<a href="#">Edit ${company.defectDisplayName}</a> <br/>						<a href="#">Delete ${company.defectDisplayName} </a><br/>					</div>				</fieldset>				<fieldset style="width:90%;">				  <legend>${company.requirementDisplayName}:</legend>					<div id="fieldS" >						<a href="#">Create ${company.requirementDisplayName} </a><br/>						<a href="#">Edit ${company.requirementDisplayName}</a> <br/>						<a href="#">Delete ${company.requirementDisplayName} </a><br/>					</div>				</fieldset>				<fieldset style="width:90%;">				  <legend>${company.environmentsDisplayName}:</legend>					<div id="fieldS" >						<a href="#">Create ${company.environmentDisplayName} </a><br/>						<a href="#">Edit ${company.environmentDisplayName}</a> <br/>						<a href="#">Delete ${company.environmentDisplayName} </a><br/>					</div>				</fieldset>				<fieldset style="width:90%;">				  	<legend>${company.usersDisplayName}:</legend>				  	<div id="fieldS" >						<a href="#">Create ${company.userDisplayName}</a><br/>						<a href="#">Edit ${company.userDisplayName} </a><br/>						<a href="#">Delete ${company.userDisplayName} </a><br/>					</div>				</fieldset>				<fieldset style="width:90%;">					<legend>${company.cyclesDisplayName}:</legend>					<div id="fieldS" >						<a href="#">Create ${company.cycleDisplayName}</a> <br/>						<a href="#">Edit ${company.cycleDisplayName}</a> <br/>						<a href="#">Delete ${company.cycleDisplayName}</a> <br/>					</div>				</fieldset>			</div>				<h3 style="height: 30px; font-size:12px; padding-top: 4px;"><a href="#">Reports</a></h3>			<div>							</div>			<h3 style="height: 30px; font-size:12px; padding-top: 4px;"><a href="#">Section 4</a></h3>			<div>							</div>					</div>	</div></div><!--	 ******************************************************************************************************************	 ************************************              north header             *****************************************	 ******************************************************************************************************************--><div class="ui-layout-north ui-widget-content" style="display: none;"><table style="width:100%;">				<!-- <BR/>			userpath : ${userpath}	<BR/>			breadCrumb : ${breadCrumb}	<BR/>			gridUrl : ${gridUrl}	<BR/>			relatedObjects : ${relatedObjects}	<BR/>				relatedItem : ${relatedItem}	<BR/>				relatedItemID : ${relatedItemID}	<BR/>				newTestplans : ${newTestplans}	<BR/>				existingTestplans : ${existingTestplans}	<BR/>-->		<tr>		<td align="left" style="width:50%;color:#456e8c;">			<a href="index.html"><img style="height:25px;" src ="images/title.png" /></a>				</td>		<td align="right" style="width:50%;color:#456e8c;" valign="middle">			${companyName}				&nbsp; <a href="editcompany.html?companyID=${company.companyID}"><img height="15" width="15" src="images/settings.png" title="Edit Company Settings" /></a>			&nbsp; <a href="viewbill.html?companyID=${company.companyID}"><img height="15" width="15" src="images/money.png" title="View Resource Bill"/></a>			&nbsp; <a href="logout.html"><img height="15" width="15" src="images/exit.png" title="Logout"/></a>			&nbsp; &nbsp; 		</td>	</tr>	<tr>		<td colspan="2">		<!--			 ******************************************************************************************************************			 ************************************         Nav bar     *****************************************			 ******************************************************************************************************************		-->			<ul id="menu">			    <li style="padding-left:30px"><a href="index.html" >Home</a><!-- Begin Home Item --></li><!-- End Home Item --> 			    <li><a href="?userpath=${fn:replace(projectsDisplayName,' ', '')}" class="drop">${projectsDisplayName}</a><!-- Begin 4 columns Item --></li><!-- End 5 columns Item -->    				    <li><a href="?userpath=${fn:replace(reportsDisplayName,' ', '')}" class="drop">${reportsDisplayName}</a><!-- Begin 4 columns Item --> </li><!-- End 4 columns Item -->								<li><a href="?userpath=${fn:replace(defectsDisplayName,' ', '')}" class="drop">${defectsDisplayName}</a><!-- Begin 4 columns Item --></li><!-- End 4 columns Item -->			    <li><a href="?userpath=${fn:replace(cyclesDisplayName,' ', '')}" class="drop">${cyclesDisplayName}</a><!-- Begin 4 columns Item --></li><!-- End 4 columns Item -->			   	<li><a href="?userpath=${fn:replace(testLibraryDisplayName,' ', '')}" class="drop">${testLibraryDisplayName}</a>			   	 <div class="dropdown_3columns align_right">  			            <div class="col_3">			           		<table>							<tr>								<td rowspan="2">									<a href="?userpath=${fn:replace(testplansDisplayName,' ', '')}">										<img src="images/testplan.jpg" width="70" height="70" class="img_left imgshadow" alt="" />										</a>								</td>								<td>									<a href="?userpath=${fn:replace(testplansDisplayName,' ', '')}"><b>${testplansDisplayName}</b></a>								</td>							</tr>							<tr>								<td>									<p>						                Contains a List of all ${testplansDisplayName} for this company. A ${testplanDisplayName} is a container for one or multiple ${testcasesDisplayName}						            </p>								</td>								   							</tr>													</table>							<table>							<tr>								<td rowspan="2">									<a href="?userpath=${fn:replace(testcasesDisplayName,' ', '')}">										<img src="images/testcase.jpg" width="70" height="70" class="img_left imgshadow" alt="" />										</a>								</td>								<td>									<a href="?userpath=${fn:replace(testcasesDisplayName,' ', '')}"><b>${testcasesDisplayName}</b></a>								</td>							</tr>							<tr>								<td>									<p>						               Contains a List of all ${testcasesDisplayName} for this company. A ${testcaseDisplayName} is used to examine an aspect of a specific requirement for a given environment				           </p>								</td>								   							</tr>													</table>									<table>							<tr>								<td rowspan="2">									<a href="?userpath=${fn:replace(testrunsDisplayName,' ', '')}">										<img src="images/testrun.png" width="70" height="70" class="img_left imgshadow" alt="" />										</a>								</td>								<td>									<a href="?userpath=${fn:replace(testrunsDisplayName,' ', '')}"><b>${testrunsDisplayName}</b></a>								</td>							</tr>							<tr>								<td>									<p>						               Contains a List of all ${testrunsDisplayName} for this company. A ${testrunDisplayName} is the result of executing a ${testcaseDisplayName} for a specified ${cycleDisplayName}				           			</p>								</td>								   							</tr>													</table>										            </div>			        			        </div>			   	</li><!-- End 4 columns Item -->						<li><a href="?userpath=${fn:replace(requirementsDisplayName,' ', '')}" class="drop">${requirementsDisplayName}</a></li><!-- End 4 columns Item -->   				<li><a href="?userpath=${fn:replace(usersDisplayName,' ', '')}" class="drop">${usersDisplayName}</a> </li><!-- End 4 columns Item -->    				<li><a  href="?userpath=${fn:replace(environmentsDisplayName,' ', '')}" class="drop">${environmentsDisplayName}</a></li>   			</ul>		</td>	</tr></table></div><!--	 ******************************************************************************************************************	 ************************************         End of north header         *****************************************	 ******************************************************************************************************************--><!--	 ******************************************************************************************************************	 ************************************            South Footer             *****************************************	 ******************************************************************************************************************--><div class="ui-layout-south" style=""><table style="width:100%">	<tr>		<td style="width:50%">			User : Kenneth		</td>		<td style="width:50%">			Role : Tester		</td>	</tr></table></div><!--	 ******************************************************************************************************************	 ************************************           New Testplan           *****************************************	 ******************************************************************************************************************-->	<div id="dialog-form" title="Create new ${testplanDisplayName}">		<p class="validateTips">All form fields are required.</p>		<form>			<fieldset>				<table width="100%" border="0" >					<tr>						<td colspan="2" valign="top">							<table width="100%">								<tr>									<td valign="top">										<label for="testplanName"style="float: left;">											Testplan Name :										</label>									</td>									<td><input type="text" name="testplanName" id="testplanName"										style="width: 200px; display: inline-block; float: left;" />																				</td>								</tr>							</table>						</td>					</tr>					<tr>						<td colspan="2">							<hr />						</td>					</tr>						<c:if test="${not empty projects}"> 									<tr>						<td colspan="2">							<fieldset>								<legend>									 ${company.projectDisplayName}(s)								</legend>								 <c:choose>									<c:when test="${allCompanyProjects}">																	<select name="projectID" id="projectID">											<c:forEach var="projectInfo" items="${projects}"												varStatus="index">												<option value="${projectInfo.projectID}">${projectInfo.projectName}</option>											</c:forEach>										</select>									</c:when>									<c:otherwise>									    <input type="hidden" name="projectID" id="projectID" value="${projects.projectID}" />								        ${projects.projectName}								    </c:otherwise>								</c:choose>																</fieldset>																			</td>					</tr>						</c:if>																	</table>							</fieldset>		</form>	</div><!--	 ******************************************************************************************************************	 ************************************           Add Testplan           *****************************************	 ******************************************************************************************************************-->	<div id="dialog-add" title="Add ${testplanDisplayName}">		<p class="validateAddTips"></p>		<form>			<fieldset>				<table width="100%" border="0" >										<c:if test="${not empty newTestplans}"> 										<tr>							<td colspan="2">								Test plan :								<select name="testplanID" id="testplanID">										<c:forEach var="testplan" items="${newTestplans}" varStatus="index">											<option value="${testplan.testplanID}">${testplan.testplanName}</option>										</c:forEach>								</select>							</td>						</tr>						</c:if>																	</table>							</fieldset>			<input type="hidden" name="relatedItem" id="relatedItem" value="${relatedItem}" >			<input type="hidden" name="relatedItemID" id="relatedItemID" value="${relatedItemID}" >								</form>	</div>	<!--	 ******************************************************************************************************************	 ************************************           Remove Testplan           *****************************************	 ******************************************************************************************************************-->	<div id="dialog-remove" title="Remove ${testplanDisplayName}">		<p class="validateRemoveTips"></p>		<form>			<fieldset>				<table width="100%" border="0" >												<tr>						<td style="width:'100%';" >								Are you sure you want to remove? <p class="removeTestplanName"></p>														</td>					</tr>																						</table>							</fieldset>				<input type="hidden" name="removeTestplanID" id="removeTestplanID" value="" >							</form>	</div>	</body></html>